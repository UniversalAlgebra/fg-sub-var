# fg-sub-var

Research on finitely generated subvarieties of finitely generated varieties

---

## Problem

Characterize the finitely generated varieties that have (or don't have) finitely generated proper subvarieties.

In [1], Aichinger and Mayr solve the problem in case $\mathbb{V}(\mathbf{A})$ is either congruence distributive or has an *edge term*. (TODO: fill in details about cases handed in [1]).

Here we consider case in which $\mathbf{A}$ is finite and idempotent, and $\mathbb{V}(\mathbf{A})$ is congruence modular, *not* congruence distributive, and does not have an edge term.  (The latter is equivalent to having a so called cube term blocker.)

One such algebra is the groupoid $\mathbf{A} = \langle \{0,1,2,3\}, *\rangle$ with the following operation table:


  * | 0   | 1   | 2   | 3
--- | --- | --- | --- | ---
0   | 0   |  2  | 1   | 1
1   | 0   |  1  | 3   | 2
2   | 0   |  3  | 2   | 1
3   | 1   |  2  | 1   | 3


The variety $\mathbb{V}(\mathbf A)$ generated by $\mathbf A$ is CM, not CD, and has no edge term---the latter, since $(\{1,2,3\},  \{0,1,2,3\})$ is a cube term blocker.

### Proper subvarieties

Every algebra is a subdirect product of subdirectly irreducible (SI) algebras, so varieties are generated by their SI members.  Thus, in order to find a proper subvariety of $\mathbb{V}(\mathbf{A})$, we look for an algebra $\mathbf{D} \in \mathbb{V}(\mathbf{A})$ and an SI in $\mathbb{V}(\mathbf{A})$ that does not belong to $\mathbb{V}(\mathbf{D})$.

#### Subdirectly Irreducibles

We begin by looking for SI's in $\mathbb V ( \mathbf A)$.

If $\mathbf{B} \in \mathbb{V}(\mathbf{A}) = \mathbf H \mathbf S \mathbf P (\mathbf A)$, then there exists $n< \omega$, $\mathbf{C}$, and $\theta \in \operatorname{Con}(\mathbf{C})$ such that $\mathbf{C} \leqslant \mathbf{A}^n$ and $\mathbf{B} \cong \mathbf C/\theta$.

The only nontrivial proper subalgebra of $\mathbf{A}$ is the 3-element squag, which we denote by $\mathbf S$.  Let $\pi_i : C \to A$ denote the projection of $C$ onto its $i$-th coordinate.  Let $\eta_i = \ker \pi_i$. Let's assume (wlog) that

$\pi_i C = A$, for $1\leqslant i \leqslant m$, and

$\pi_i C = S$, for $m < i \leqslant n$.

Let $\eta_1 = \bigcap_{1\leqslant i \leqslant m} \eta_i$ and $\eta_2 = \bigcap_{m< i \leqslant n} \eta_i$ and let


---

## Other 4-Element Examples

Here are the operation tables of a few other examples of idempotent groupoids with the properties mentioned (i.e., $\mathbb{V}(\mathbf A)$ is CM, not CD, CTB).

$\circ_1$ | 0   | 1   | 2   | 3
--- | --- | --- | --- | ---
0   | 0   |  2  | 1   | 3
1   | 0   |  1  | 3   | 2
2   | 1   |  3  | 2   | 1
3   | 1   |  2  | 1   | 3

$\circ_2$ | 0   | 1   | 2   | 3
--- | --- | --- | --- | ---
0   | 0   |  2  | 3   | 1
1   | 0   |  1  | 3   | 2
2   | 2   |  3  | 2   | 1
3   | 2   |  2  | 1   | 3

$\circ_3$ | 0   | 1   | 2   | 3
--- | --- | --- | --- | ---
0   | 0   |  3  | 2   | 1
1   | 0   |  1  | 3   | 2
2   | 3   |  3  | 2   | 1
3   | 3   |  2  | 1   | 3

$\circ_4$ | 0   | 1   | 2   | 3
--- | --- | --- | --- | ---
0   | 0   |  3  | 1   | 1
1   | 0   |  1  | 3   | 2
2   | 0   |  3  | 2   | 1
3   | 1   |  2  | 1   | 3


----------

## 6-Element Examples

There are also 6-element algebras with these properties. Take, for example, the algebra
$\mathbf{A}_6 = \langle \{0,1,2,3,4,5\}, \circ\rangle$ with operation table shown below.

  * | 0   | 1   | 2   | 3   | 4   | 5
--- | --- | --- | --- | --- | --- | ---
0   | 0   |  2  | 1   | 1   |  1  | 1
1   | 0   |  1  | 3   | 5   |  2  | 4
2   | 0   |  3  | 2   | 4   |  5  | 1
3   | 0   |  5  | 4   | 3   |  1  | 2
4   | 0   |  2  | 5   | 1   |  4  | 3
5   | 1   |  4  | 1   | 2   |  3  | 5

More generally, the following table yields a $2n$-element algebra with the same properties (i.e., $\mathbb{V}(\mathbf A)$ is CM, not CD, CTB):

  * | 0   | 1   | 2   | 3   | ... | $2n-1$
--- | --- | --- | --- | --- | --- | ---
 0  | 0      | 2 | 1 | 1 | $\cdots$ | 1
 1 | 0      |   |   |   |        |
 2 | 0      |   |   |   |        |
$\vdots$ | $\vdots$ | |  | | $\mathrm{Squag}_{2n-1}$
$2n-2$ | 0      |   |   |   |        |
         $2n-1$ | 1      |   |   |   |

Specializing to $3$-permutability for now, a **local Hagemann-Mitchke sequence** for the set

$$\{(a_0, b_0, 0), (a_1, b_1, 1) , (a_2, b_2, 2) \} \subseteq A \times A \times \{0,1,2\}$$

is a triple, $\mathbf p = (p_0, p_1, p_2)$, of 3-place terms satisfying

$$a_0 = p_0(a_0, a_0, b_0) =p_1(a_0, b_0, b_0)$$
$$\quad    = p_1(a_1, a_1, b_1) =p_2(a_1, b_1, b_1)$$
$$\quad \qquad    = p_2(a_2, a_2, b_2) =p_3(a_2, b_2, b_2) = b_2 $$

Where we take $p_0$ and $p_3$ to be the first and third projections, respectively.

More generally, for $0\leq i < m$ and
$(a_i, b_i, i)\in A \times A \times \{0,1,\dots,m-1\}$,
we call $p = (p_0, p_1, \dots, p_m)$ a **local Hagemann-Mitchke sequence** for
$(a_i, b_i, i)$ if $p_i(a_i, a_i, b_i) = p_{i+1}(a_i, b_i, b_i)$, where $p_0, p_m$ are the first and third projections, respectively.

Valeriote and Willard prove in [2] that an idempotent algebra $\mathbf{A}$ generates a congruence $(n+1)$-permutable variety if and only if every subset
of $A \times A \times \{0, 1, \dots, n\}$ has a local Hagemann-Mitchke sequence.

---

**Question:** Can the pair of terms below be used as the (non-projection) terms in a local Hagemann-Mitchke sequence $\mathbf p = (p_0, p_1, p_2, p_3)$ for the examples above.

$$p_1(x,y,z) = (x (y z) )x$$
$$p_2(x,y,z) = (x (x (y z)) )x$$

**Answer:** No, these don't work. (insert counterexample)

Here are some other tables that also yield algebras generating a CM, non-distributive variety with no cube term:

---

## Checking the examples in UACalc

All of the examples mentioned above, and the three properties claimed (CM, not CD, no edge term), can be checked by pasting the following xml code into a file (say, `Groupoids.ua`) and then opening that file in the [UACalc](http://uacalc.org).  To check the properties, from the "Idempotent Alg" menu, select the following:
+ Is V(A) CD (answer "no")
+ Is V(A) CM (answer "yes")
+ Edge term for some k (answer "no")


```xml
<?xml version="1.0"?>
<algebras>
<algebra>
  <basicAlgebra>
    <algName>FourEltGrpoid_0</algName>
    <cardinality>4</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[0]">0,2,1,1</row>
            <row r="[1]">0,1,3,2</row>
            <row r="[2]">0,3,2,1</row>
            <row r="[3]">1,2,1,3</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
<algebra>
  <basicAlgebra>
    <algName>FourEltGrpoid_1</algName>
    <cardinality>4</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[1]">0,2,1,3</row>
            <row r="[2]">0,1,3,2</row>
            <row r="[3]">1,3,2,1</row>
            <row r="[4]">1,2,1,3</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
<algebra>
  <basicAlgebra>
    <algName>FourEltGrpoid_2</algName>
    <cardinality>4</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[1]">0,2,3,1</row>
            <row r="[2]">0,1,3,2</row>
            <row r="[3]">2,3,2,1</row>
            <row r="[4]">2,2,1,3</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
<algebra>
  <basicAlgebra>
    <algName>FourEltGrpoid_3</algName>
    <cardinality>4</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[1]">0,3,2,1</row>
            <row r="[2]">0,1,3,2</row>
            <row r="[3]">3,3,2,1</row>
            <row r="[4]">3,2,1,3</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
<algebra>
  <basicAlgebra>
    <algName>FourEltGrpoid_4</algName>
    <cardinality>4</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[1]">0,3,1,1</row>
            <row r="[2]">0,1,3,2</row>
            <row r="[3]">0,3,2,1</row>
            <row r="[4]">1,2,1,3</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
<algebra>
  <basicAlgebra>
    <algName>SixEltGrpoid_1</algName>
    <cardinality>6</cardinality>
    <operations>
      <op>
        <opSymbol>
          <opName>*</opName>
          <arity>2</arity>
        </opSymbol>
        <opTable>
          <intArray>
            <row r="[1]">0,2,1,1,1,1</row>
            <row r="[2]">0,1,3,5,2,4</row>
            <row r="[3]">0,3,2,4,5,1</row>
            <row r="[4]">0,5,4,3,1,2</row>
            <row r="[5]">0,2,5,1,4,3</row>
            <row r="[6]">1,4,1,2,3,5</row>
          </intArray>
        </opTable>
      </op>
    </operations>
  </basicAlgebra>
</algebra>
</algebras>
```









------------------------------------------------------







## References

[1] Aichinger and Mayr, "Finitely generated equational classes," 2016.

```
@article {MR3471188,
    AUTHOR = {Aichinger, Erhard and Mayr, Peter},
     TITLE = {Finitely generated equational classes},
   JOURNAL = {J. Pure Appl. Algebra},
  FJOURNAL = {Journal of Pure and Applied Algebra},
    VOLUME = {220},
      YEAR = {2016},
    NUMBER = {8},
     PAGES = {2816--2827},
      ISSN = {0022-4049},
   MRCLASS = {08B05 (03C05 08B15)},
  MRNUMBER = {3471188},
MRREVIEWER = {Mohammad Shahryari},
       DOI = {10.1016/j.jpaa.2016.01.001},
       URL = {https://doi-org.colorado.idm.oclc.org/10.1016/j.jpaa.2016.01.001},
}
```


[2] Valeriote and Willard, "Idempotent {$n$}-permutable varieties," 2014.

```
@article {MR3239624,
    AUTHOR = {Valeriote, M. and Willard, R.},
     TITLE = {Idempotent {$n$}-permutable varieties},
   JOURNAL = {Bull. Lond. Math. Soc.},
  FJOURNAL = {Bulletin of the London Mathematical Society},
    VOLUME = {46},
      YEAR = {2014},
    NUMBER = {4},
     PAGES = {870--880},
      ISSN = {0024-6093},
   MRCLASS = {08A05 (06F99 68Q25)},
  MRNUMBER = {3239624},
       DOI = {10.1112/blms/bdu044},
       URL = {http://dx.doi.org/10.1112/blms/bdu044},
}
```
